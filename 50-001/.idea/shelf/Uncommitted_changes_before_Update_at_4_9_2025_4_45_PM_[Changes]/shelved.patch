Index: app/src/main/java/com/example/wowcher/fragments/Home.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package com.example.wowcher.fragments;\r\n\r\nimport android.os.Build;\r\nimport android.os.Bundle;\r\nimport android.view.LayoutInflater;\r\nimport android.view.View;\r\nimport android.view.ViewGroup;\r\nimport androidx.annotation.NonNull;\r\nimport androidx.annotation.Nullable;\r\nimport androidx.fragment.app.Fragment;\r\n\r\nimport com.example.wowcher.MyAdapter;\r\nimport com.example.wowcher.R;\r\nimport com.example.wowcher.classes.User;\r\nimport com.example.wowcher.classes.Voucher;\r\nimport com.example.wowcher.controller.UserController;\r\nimport com.example.wowcher.controller.UserControllerFactory;\r\nimport com.example.wowcher.controller.VoucherController;\r\nimport com.example.wowcher.controller.VoucherControllerFactory;\r\nimport com.example.wowcher.db.DBSource;\r\nimport com.example.wowcher.db.UserSource;\r\nimport com.example.wowcher.db.VoucherSource;\r\nimport com.google.firebase.auth.FirebaseAuth;\r\nimport com.google.firebase.auth.FirebaseUser;\r\nimport com.google.firebase.firestore.FirebaseFirestore;\r\nimport com.google.firebase.firestore.QueryDocumentSnapshot;\r\n\r\nimport androidx.appcompat.app.AppCompatActivity;\r\nimport androidx.appcompat.widget.SearchView;\r\nimport androidx.lifecycle.Observer;\r\nimport androidx.lifecycle.ViewModelProvider;\r\nimport androidx.recyclerview.widget.GridLayoutManager;\r\nimport androidx.recyclerview.widget.RecyclerView;\r\nimport android.os.Bundle;\r\nimport android.widget.Toast;\r\nimport java.util.ArrayList;\r\nimport java.util.List;\r\nimport java.util.Locale;\r\n\r\npublic class Home extends Fragment {\r\n\r\n\r\n    RecyclerView recyclerView;\r\n    List<Voucher> dataList;\r\n    MyAdapter adapter;\r\n    SearchView searchView;\r\n\r\n    FirebaseAuth auth;\r\n    FirebaseUser user;\r\n    FirebaseFirestore db;\r\n    UserController userModel;\r\n    VoucherController voucherModel;\r\n\r\n    @Nullable\r\n    @Override\r\n    public View onCreateView(@NonNull LayoutInflater inflater, @Nullable ViewGroup container, @Nullable Bundle savedInstanceState) {\r\n        View view = inflater.inflate(R.layout.fragment_home, container, false);\r\n\r\n        auth = FirebaseAuth.getInstance();\r\n        user = auth.getCurrentUser();\r\n\r\n        recyclerView = view.findViewById(R.id.recyclerView);\r\n\r\n        recyclerView.setLayoutManager(new GridLayoutManager(requireContext(), 1));\r\n\r\n        db = FirebaseFirestore.getInstance();\r\n        //User\r\n        DBSource userSourceInstance = new UserSource(db);\r\n        userModel= new ViewModelProvider(this, new UserControllerFactory(userSourceInstance)).get(UserController.class);\r\n        userModel.getModelInstance(userModel);\r\n\r\n        //Voucher\r\n        DBSource voucherSourceInstance = new VoucherSource(db);\r\n        voucherModel = new ViewModelProvider(this, new VoucherControllerFactory(voucherSourceInstance)).get(VoucherController.class);\r\n        voucherModel.getModelInstance(voucherModel);\r\n\r\n        userModel.getUserInfoFromSource(\"userId\", user.getUid());\r\n\r\n        final Observer<ArrayList<Voucher>> voucherObserver = new Observer<ArrayList<Voucher>> () {\r\n            @Override\r\n            public void onChanged(@Nullable final ArrayList<Voucher> voucherList) {\r\n\r\n                if(voucherList != null){\r\n                    if (!voucherList.isEmpty()) {\r\n                        adapter = new MyAdapter(requireContext(), voucherList);\r\n                        recyclerView.setAdapter(adapter);\r\n                    } else {\r\n                        Toast.makeText(requireContext(), \"No Voucher to Load\", Toast.LENGTH_SHORT).show();\r\n                    }\r\n\r\n                    adapter.notifyDataSetChanged();\r\n                } else {\r\n                    Toast.makeText(requireContext(), \"Failed to load vouchers\", Toast.LENGTH_SHORT).show();\r\n                }\r\n            }\r\n        };\r\n\r\n\r\n        final Observer<User> userObserver = new Observer<User> () {\r\n            @Override\r\n            public void onChanged(@Nullable final User user) {\r\n                if ((Build.VERSION.SDK_INT >= Build.VERSION_CODES.O) && (user !=null)){\r\n                    ArrayList<String> redeemedVouchers = user.getPreviousVouchers();\r\n                    voucherModel.getVouchersforAll(redeemedVouchers);\r\n                    voucherModel.getAllVouchers().observe(getViewLifecycleOwner(), voucherObserver);\r\n                }\r\n\r\n            }\r\n        };\r\n\r\n        userModel.getUserInfo().observe(getViewLifecycleOwner(), userObserver);\r\n\r\n        //OBSOLETE\r\n        //loadUserVouchers();\r\n        return view;\r\n    }\r\n\r\n    //OBSOLETE\r\n    private void searchList(String text) {\r\n        List<Voucher> dataSearchList = new ArrayList<>();\r\n        for (Voucher data : dataList) {\r\n            if (data.getTitle().toLowerCase().contains(text.toLowerCase())) {\r\n                dataSearchList.add(data);\r\n            }\r\n        }\r\n        if (dataSearchList.isEmpty()) {\r\n            Toast.makeText(requireContext(), \"Not Found\", Toast.LENGTH_SHORT).show();\r\n        } else {\r\n            adapter.setSearchList(dataSearchList);\r\n        }\r\n    }\r\n    //OBSOLETE\r\n    private void loadVouchersFromFirebase() {\r\n        FirebaseFirestore db = FirebaseFirestore.getInstance();\r\n\r\n        db.collection(\"vouchers\")\r\n                .get()\r\n                .addOnCompleteListener(task -> {\r\n                    if (task.isSuccessful()) {\r\n                        dataList.clear();\r\n\r\n                        for (QueryDocumentSnapshot document : task.getResult()) {\r\n                            String voucherId = document.getString(\"voucherId\");\r\n                            String title = document.getString(\"title\");\r\n                            String details = document.getString(\"details\");\r\n                            String status = document.getString(\"status\");\r\n                            String createdAt = document.getString(\"createdAt\");\r\n                            String locationId = document.getString(\"locationId\");\r\n\r\n                            Voucher voucher = new Voucher(voucherId, title, details, status, locationId, createdAt);\r\n                            dataList.add(voucher);\r\n                        }\r\n\r\n                        adapter.notifyDataSetChanged();\r\n                    } else {\r\n                        Toast.makeText(requireContext(), \"Failed to load vouchers\", Toast.LENGTH_SHORT).show();\r\n                    }\r\n                });\r\n    }\r\n\r\n}
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/app/src/main/java/com/example/wowcher/fragments/Home.java b/app/src/main/java/com/example/wowcher/fragments/Home.java
--- a/app/src/main/java/com/example/wowcher/fragments/Home.java	(revision e79d83b5f9fe52abd19672046c76d62c72a34a6d)
+++ b/app/src/main/java/com/example/wowcher/fragments/Home.java	(date 1744187794668)
@@ -95,7 +95,6 @@
             }
         };
 
-
         final Observer<User> userObserver = new Observer<User> () {
             @Override
             public void onChanged(@Nullable final User user) {
